# ?????????????????????????????????????????????????????????????
#  Datasource (Railway)
# ?????????????????????????????????????????????????????????????
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# ?????????????????????????????????????????????????????????????
#  JPA / Hibernate
#     ?  create  ?  borra TODO el esquema y lo vuelve a generar
#     ?  (vuelve a update después del primer arranque)
# ?????????????????????????????????????????????????????????????
# spring.jpa.hibernate.ddl-auto=create
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# ?????????????????????????????????????????????????????????????
#  JWT  &  reCAPTCHA
# ?????????????????????????????????????????????????????????????
jwt.secret=${JWT_SECRET}
recaptcha.secret=${RECAPTCHA_SECRET}

# ?????????????????????????????????????????????????????????????
#  CORS  (Netlify front-end)
# ?????????????????????????????????????????????????????????????
spring.web.cors.allowed-origins=https://appgymregistro.netlify.app

# ?????????????????????????????????????????????????????????????
#  Actuator  (health checks)
# ?????????????????????????????????????????????????????????????
management.endpoints.web.exposure.include=health
management.endpoint.health.probes.enabled=true

# ?????????????????????????????????????????????????????????????
#  Seguridad / Spring Security
# ?????????????????????????????????????????????????????????????
spring.main.allow-bean-definition-overriding=false

#  Logs detallados para debug (puedes bajarlos a INFO cuando todo funcione)

# ????????? LOG ?????????
# Spring-Security
logging.level.org.springframework.security=DEBUG
# SQL que envía Hibernate
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
# Tu capa de servicio / repos
logging.level.com.example.AppGYM.repository=DEBUG
logging.level.com.example.AppGYM.service=DEBUG

logging.level.root=INFO                     # resto en INFO
logging.level.com.example.AppGYM=TRACE      # TODO tu código en TRACE
logging.level.org.springframework.web=DEBUG # muestra excepción completa
spring.mvc.log-request-details=true         # cabeceras, parámetros, etc.

# ??? LOG extra sólo para la subida de imágenes ???

# ??? multipart (subida de fotos) ????????????????????????????????????????????
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# ??? logging extra para Fotos / Storage ?????????????????????????????????????
logging.level.com.example.AppGYM.controller.PhotoController=DEBUG
logging.level.com.example.AppGYM.service.StorageService    =DEBUG